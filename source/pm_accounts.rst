


物理机计费接口
====================

.. toctree::
   :maxdepth: 2
   :numbered:



概要
--------------------

获取物理机的计费信息，共两个接口，第一个返回该项目下所有物理机的每月费用（分区域）， 第二个获取指定项目，
指定区域，指定月份的明细物理机计费，均需要带上有效的 Token。


API规范
--------------------------

获取物理机计费API入口与API列表如下：


    * API入口: http://m.scloudm.com/
    * API列表:

+------------------+-------------------------------+------------+--------------------------------+
|  资源            |  操作                         |  HTTP方法  |  URI路径                       |
+==================+===============================+============+================================+
|  pm_bill         |  获取项目下所有物理机计费信息 |  GET       |  /mana_api/pm_bill             |
+------------------+-------------------------------+------------+--------------------------------+
|  pm_bill_detail  |  获取物理机明细计费信息       |  GET       |  /mana_api/pm_bill_detail      |
+------------------+-------------------------------+------------+--------------------------------+

获取项目下所有物理机计费信息
--------------------------------------


+------------+--------------------+-----------------+
|  HTTP方法  |  URI路径           |  描述           |
+============+====================+=================+
|  GET       |  /mana_api/pm_bill |  所有物理机计费 |
+------------+--------------------+-----------------+

请求参数

+-----------------------+----------+----------------+
|  字段名               |  类型    |  描述          |
+=======================+==========+================+
|  tenant_id            |  string  |  租户ID        |
+-----------------------+----------+----------------+


请求样例

::


    curl  -i \
          -H 'X-Auth-Token: {token_id}' \
          -X GET 'http://m.scloudm.com/mana_api/pm_bill?tenant_id={tenant_id}'


返回参数

+-------------------+-------------+-------------------------------------------------------------------------+
|  字段名           |  类型       |  描述                                                                   |
+===================+=============+=========================================================================+
|  accounts         |  list       |  包含了该租户下所有物理机每月计费信息，分区域                           |
+-------------------+-------------+-------------------------------------------------------------------------+
|  price            |  float      |  费用                                                                   |
+-------------------+-------------+-------------------------------------------------------------------------+
|  month            |  string     |  月份                                                                   |
+-------------------+-------------+-------------------------------------------------------------------------+
|  region           |  string     |  所属区域                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+

返回样例

::


        HTTP/1.0 200 OK
        Content-Type: application/json
        Content-Length: 295
        Server: Werkzeug/0.10.4 Python/2.7.5
        Date: Tue, 26 Jan 2016 06:22:29 GMT

        {
          "accounts": [
            {
              "price": 66.0,
              "month": "2016-01",
              "region": "zhenru"
            },
            {
              "price": 33.0,
              "month": "2015-12",
              "region": "zhenru"
            },
            {
              "price": 33.0,
              "month": "2015-12",
              "region": "beijing"
            }
          ]
        }


获取物理机计费明细
--------------------------------------

+------------+---------------------------+-----------------+
|  HTTP方法  |  URI路径                  |  描述           |
+============+===========================+=================+
|  GET       |  /mana_api/pm_bill_detail |  物理机明细计费 |
+------------+---------------------------+-----------------+

请求参数

+-----------------------+----------+----------------+
|  字段名               |  类型    |  描述          |
+=======================+==========+================+
|  tenant_id            |  string  |  租户ID        |
+-----------------------+----------+----------------+
|  region               |  string  |  所属区域      |
+-----------------------+----------+----------------+
|  month                |  string  |  指定查询月份  |
+-----------------------+----------+----------------+

请求样例

::


    curl  -i \
          -H 'X-Auth-Token: {token_id}' \
          -X GET 'http://m.scloudm.com/mana_api/pm_bill_detail?tenant_id=666&region=zhenru&month=2015-12'


返回参数

+-------------------+-------------+-------------------------------------------------------------------------+
|  字段名           |  类型       |  描述                                                                   |
+===================+=============+=========================================================================+
|  accounts         |  list       |  包含了该租户下所有物理机每月计费信息，分区域                           |
+-------------------+-------------+-------------------------------------------------------------------------+
|  price            |  float      |  费用                                                                   |
+-------------------+-------------+-------------------------------------------------------------------------+
|  system_snid      |  string     |  系统序列号                                                             |
+-------------------+-------------+-------------------------------------------------------------------------+


返回样例

::


        HTTP/1.0 200 OK
        Content-Type: application/json
        Content-Length: 295
        Server: Werkzeug/0.10.4 Python/2.7.5
        Date: Tue, 26 Jan 2016 06:22:29 GMT

        {
          "accounts_detail": [
            {
              "price": 11.0,
              "system_snid": "123"
            },
            {
              "price": 22.0,
              "system_snid": "321"
            }
          ]
        }
