


项目月流量带宽接口(虚拟机)
===========================

.. toctree::
   :maxdepth: 2
   :numbered:



概要
---------------------------

获取项目下虚拟机的流量信息，共两个接口，第一个返回指定项目下所有虚拟机的每月峰值流量带宽（分区域）， 第二个获取指定项目
某个时间区间内的带宽明细数据(用来画图)，均需要带上有效的 Token。


API规范
--------------------------

获取项目流量带宽API入口与API列表如下：


    * API入口: http://m.scloudm.com/
    * API列表:

+------------------+-------------------------------+------------+--------------------------------+
|  资源            |  操作                         |  HTTP方法  |  URI路径                       |
+==================+===============================+============+================================+
|  flow_monthly    |  获取月流量带宽峰值           |  GET       |  /mana_api/flow_monthly        |
+------------------+-------------------------------+------------+--------------------------------+
|  flow            |  获取带宽明细                 |  GET       |  /mana_api/flow                |
+------------------+-------------------------------+------------+--------------------------------+

获取月流量带宽峰值
--------------------------------------


+------------+-------------------------+-----------------+
|  HTTP方法  |  URI路径                |  描述           |
+============+=========================+=================+
|  GET       |  /mana_api/flow_monthly |  月流量带宽峰值 |
+------------+-------------------------+-----------------+

请求参数

+-----------------------+----------+----------------+
|  字段名               |  类型    |  描述          |
+=======================+==========+================+
|  project_id           |  string  |  租户ID        |
+-----------------------+----------+----------------+
|  region (可选)        |  string  |  所属区域      |
+-----------------------+----------+----------------+
|  month (可选)         |  string  |  指定月份      |
+-----------------------+----------+----------------+

请求样例

::


    curl  -i \
          -H 'X-Auth-Token: {token_id}' \
          -X GET 'http://m.scloudm.com/mana_api/flow_monthly?project_id=5106f9c2d315&region=zhenru&month=2015-12'


返回参数

+-------------------+-------------+-------------------------------------------------------------------------+
|  字段名           |  类型       |  描述                                                                   |
+===================+=============+=========================================================================+
|  monthly_data     |  list       |  包含了该租户下每月流量带宽峰值信息，分区域                             |
+-------------------+-------------+-------------------------------------------------------------------------+
|  date             |  string     |  月份                                                                   |
+-------------------+-------------+-------------------------------------------------------------------------+
|  max_in_rate      |  float      |  最大进带宽，单位:B/s                                                   |
+-------------------+-------------+-------------------------------------------------------------------------+
|  max_in_rate_date |  string     |  最大进带宽出现的时间                                                   |
+-------------------+-------------+-------------------------------------------------------------------------+
|  max_out_rate     |  float      |  最大出带宽，单位:B/s                                                   |
+-------------------+-------------+-------------------------------------------------------------------------+
|  max_out_rate_date|  string     |  最大出带宽出现的时间                                                   |
+-------------------+-------------+-------------------------------------------------------------------------+
|  project_id       |  string     |  租户ID                                                                 |
+-------------------+-------------+-------------------------------------------------------------------------+
|  region           |  string     |  所属区域                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  total_in         |  float      |  整月进流量，单位:B                                                     |
+-------------------+-------------+-------------------------------------------------------------------------+
|  total_out        |  float      |  整月出流量，单位:B                                                     |
+-------------------+-------------+-------------------------------------------------------------------------+

返回样例

::


        HTTP/1.0 200 OK
        Content-Type: application/json
        Content-Length: 356
        Server: Werkzeug/0.10.4 Python/2.7.5
        Date: Thu, 28 Jan 2016 09:55:43 GMT

        {
          "monthly_data": [
            {
              "date": "2015-09",
              "max_in_rate": 0.0,
              "max_in_rate_date": "2015-09-01 00:10:00",
              "max_out_rate": 8888.0,
              "max_out_rate_date": "2015-09-01 02:30:00",
              "project_id": "5106f9c2d315486695821c4a6927e5e6",
              "region": "beijing",
              "total_in": "0",
              "total_out": "0"
            }
          ]
        }


获取带宽明细
--------------------------------------

+------------+---------------------------+-----------------+
|  HTTP方法  |  URI路径                  |  描述           |
+============+===========================+=================+
|  GET       |  /mana_api/flow           |  带宽明细       |
+------------+---------------------------+-----------------+

请求参数

+-----------------------+----------+----------------+
|  字段名               |  类型    |  描述          |
+=======================+==========+================+
|  project_id           |  string  |  租户ID        |
+-----------------------+----------+----------------+
|  region (可选)        |  string  |  所属区域      |
+-----------------------+----------+----------------+
|  start (可选)         |  string  |  查询开始时间  |
+-----------------------+----------+----------------+
|  end (可选)           |  string  |  查询结束时间  |
+-----------------------+----------+----------------+

请求样例

::


    curl  -i \
          -H 'X-Auth-Token: {token_id}' \
          -X GET 'http://m.scloudm.com/mana_api/flow_monthly?project_id=5106f9c2d315&region=zhenru&start=2015-12-01&end=2015-12-04'


返回参数

+-------------------+-------------+-------------------------------------------------------------------------+
|  字段名           |  类型       |  描述                                                                   |
+===================+=============+=========================================================================+
|  data             |  list       |  包含了每一个时间点的带宽信息                                           |
+-------------------+-------------+-------------------------------------------------------------------------+
|  其他字段         |  string     |  从返回样例中看去                                                       |
+-------------------+-------------+-------------------------------------------------------------------------+


返回样例

::


        HTTP/1.0 200 OK
        Content-Type: application/json
        Content-Length: 295
        Server: Werkzeug/0.10.4 Python/2.7.5
        Date: Tue, 26 Jan 2016 06:22:29 GMT

        {
          "data": [
            {
              "begin_rate_date": "2015-09-01 00:00:00",
              "date": "2015-09-01",
              "end_rate_date": "2015-09-01 00:10:00",
              "in_rate": 0.0,
              "out_rate": 0.0,
              "project_id": "5106f9c2d315486695821c4a6927e5e6",
              "region": "beijing"
            },
            {
              "begin_rate_date": "2015-09-01 00:10:00",
              "date": "2015-09-01",
              "end_rate_date": "2015-09-01 00:20:00",
              "in_rate": 0.0,
              "out_rate": 0.0,
              "project_id": "5106f9c2d315486695821c4a6927e5e6",
              "region": "beijing"
            },
            {
              "begin_rate_date": "2015-09-01 00:20:00",
              "date": "2015-09-01",
              "end_rate_date": "2015-09-01 00:30:00",
              "in_rate": 0.0,
              "out_rate": 0.0,
              "project_id": "5106f9c2d315486695821c4a6927e5e6",
              "region": "beijing"
            }
          ]
        }
